name: Network Error
agent: backend-system-architect
version: "1.0.0"
description: Template for network and API errors
template: |
  ğŸš¨ ç¶²è·¯éŒ¯èª¤ - {{ severity|upper }} å„ªå…ˆç´š Debug

  ## éŒ¯èª¤æ‘˜è¦
  æª¢æ¸¬åˆ°ç¶²è·¯ç›¸é—œéŒ¯èª¤
  {% if files %}
  
  ### ç›¸é—œæ–‡ä»¶ï¼š
  {{ affected_files }}
  {% endif %}

  ### éŒ¯èª¤ä¿¡æ¯ï¼š
  ```
  {{ error_text }}
  ```

  ## ğŸ” ç¶²è·¯è¨ºæ–·ä»»å‹™

  1. **éŒ¯èª¤é¡å‹åˆ†æ**
     {% if "CORS" in error_text %}
     ### CORS è·¨åŸŸå•é¡Œ
     - **å‰ç«¯è§£æ±ºæ–¹æ¡ˆ**ï¼š
       * ä½¿ç”¨ä»£ç†æœå‹™å™¨é€²è¡Œé–‹ç™¼
       * é…ç½® webpack devServer proxy
       * ä½¿ç”¨ CORS ä»£ç†æœå‹™
     
     - **å¾Œç«¯è§£æ±ºæ–¹æ¡ˆ**ï¼š
       * æ·»åŠ é©ç•¶çš„ CORS headers
       * é…ç½®å…è¨±çš„ä¾†æºã€æ–¹æ³•å’Œæ¨™é ­
       * è™•ç† preflight è«‹æ±‚
     {% elif "ERR_CONNECTION_REFUSED" in error_text or "ECONNREFUSED" in error_text %}
     ### é€£æ¥è¢«æ‹’çµ•
     - æª¢æŸ¥æœå‹™æ˜¯å¦æ­£åœ¨é‹è¡Œ
     - é©—è­‰ç«¯å£è™Ÿæ˜¯å¦æ­£ç¢º
     - æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®
     - ç¢ºèª URL å’Œå”è­°æ­£ç¢º
     {% elif "timeout" in error_text.lower() %}
     ### è«‹æ±‚è¶…æ™‚
     - å¢åŠ è¶…æ™‚æ™‚é–“è¨­ç½®
     - å„ªåŒ– API éŸ¿æ‡‰æ™‚é–“
     - å¯¦ç¾é‡è©¦æ©Ÿåˆ¶
     - è€ƒæ…®åˆ†é æˆ–é™åˆ¶æ•¸æ“šé‡
     {% else %}
     - æª¢æŸ¥ç¶²è·¯é€£æ¥
     - é©—è­‰ API endpoint
     - æª¢æŸ¥èªè­‰ç‹€æ…‹
     {% endif %}

  2. **èª¿è©¦æ­¥é©Ÿ**
     - **ç¶²è·¯æª¢æŸ¥**ï¼š
       ```bash
       # æ¸¬è©¦é€£æ¥
       curl -I https://api.example.com
       ping api.example.com
       traceroute api.example.com
       ```
     
     - **ç€è¦½å™¨èª¿è©¦**ï¼š
       * æ‰“é–‹ Network é¢æ¿
       * æª¢æŸ¥è«‹æ±‚å’ŒéŸ¿æ‡‰æ¨™é ­
       * æŸ¥çœ‹éŸ¿æ‡‰ç‹€æ…‹ç¢¼
       * åˆ†æè«‹æ±‚æ™‚åº

  3. **å¯¦æ–½ä¿®å¾©**
     - **CORS é…ç½®ç¤ºä¾‹**ï¼š
       ```javascript
       // Express.js
       app.use(cors({
         origin: process.env.FRONTEND_URL,
         credentials: true
       }));
       ```
     
     - **éŒ¯èª¤è™•ç†æ”¹é€²**ï¼š
       ```javascript
       try {
         const response = await fetch(url, {
           timeout: 30000,
           retry: 3
         });
       } catch (error) {
         if (error.code === 'ECONNREFUSED') {
           // è™•ç†é€£æ¥éŒ¯èª¤
         }
       }
       ```

  4. **é é˜²æªæ–½**
     - å¯¦ç¾å®Œå–„çš„éŒ¯èª¤è™•ç†
     - æ·»åŠ è«‹æ±‚é‡è©¦æ©Ÿåˆ¶
     - ä½¿ç”¨æ–·è·¯å™¨æ¨¡å¼
     - ç›£æ§ API å¯ç”¨æ€§

  ## ğŸ’¡ å¿«é€Ÿæª¢æŸ¥æ¸…å–®
  - [ ] API æœå‹™æ˜¯å¦æ­£åœ¨é‹è¡Œï¼Ÿ
  - [ ] URL å’Œç«¯å£æ˜¯å¦æ­£ç¢ºï¼Ÿ
  - [ ] æ˜¯å¦æœ‰è·¨åŸŸé™åˆ¶ï¼Ÿ
  - [ ] èªè­‰ token æ˜¯å¦æœ‰æ•ˆï¼Ÿ
  - [ ] ç¶²è·¯é€£æ¥æ˜¯å¦æ­£å¸¸ï¼Ÿ

  ## ğŸ¤– æ¨è–¦ Agent
  ä½¿ç”¨ `{{ recommended_agent }}` agent ä¾†è§£æ±ºç¶²è·¯é…ç½®å•é¡Œ